id: pull-project
namespace: home.lab

inputs:

  - id: git_user
    type: STRING
    description: "Username from git"
    required: true
    defaults:
      - marcelobojikian

  - id: git_project
    type: STRING
    description: "Project from git"
    required: true
    defaults:
      - homelab

  - id: git_branch
    type: STRING
    description: "Project from git"
    required: true
    defaults:
      - main

tasks:

  - id: setup
    type: io.kestra.core.tasks.flows.WorkingDirectory
    tasks:

      - id: "clone"
        type: "io.kestra.plugin.git.Clone"
        url: 'https://github.com/{{ inputs.git_user }}/{{ inputs.git_project }}'
        branch: '{{ inputs.git_branch }}'

