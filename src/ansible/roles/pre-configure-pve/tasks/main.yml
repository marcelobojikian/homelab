
- name: Disable pve-enterprise repository
  ansible.builtin.lineinfile:
    path: /etc/apt/sources.list.d/pve-enterprise.list
    search_string: 'deb https://enterprise.proxmox.com/debian/pve bookworm pve-enterprise'
    line: '# deb https://enterprise.proxmox.com/debian/pve bookworm pve-enterprise'
  delegate_to: "{{ ansible_ip }}"

- name: Disable ceph-quincy repository
  ansible.builtin.lineinfile:
    path: /etc/apt/sources.list.d/ceph.list
    search_string: 'deb https://enterprise.proxmox.com/debian/ceph-quincy bookworm enterprise'
    line: '# deb https://enterprise.proxmox.com/debian/ceph-quincy bookworm enterprise'
  delegate_to: "{{ ansible_ip }}"

- name: Add Proxmox VE No-Subscription Repository, NOT recommended for production use
  ansible.builtin.apt_repository:
    repo: deb http://download.proxmox.com/debian/pve bookworm pve-no-subscription
    state: present
  delegate_to: "{{ ansible_ip }}"

- name: Add Ceph Reef No-Subscription Repository, NOT recommended for production use
  ansible.builtin.apt_repository:
    repo: deb http://download.proxmox.com/debian/ceph-reef bookworm no-subscription
    state: present
  delegate_to: "{{ ansible_ip }}"

- name: Add Ceph Quincy No-Subscription Repository, NOT recommended for production use
  ansible.builtin.apt_repository:
    repo: deb http://download.proxmox.com/debian/ceph-quincy bookworm no-subscription
    state: present
  delegate_to: "{{ ansible_ip }}"